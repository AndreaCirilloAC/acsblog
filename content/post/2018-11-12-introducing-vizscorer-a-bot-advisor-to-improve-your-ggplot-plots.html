---
title: 'introducing vizscorer: a bot advisor to improve your ggplot plots'
author: Andrea Cirillo
date: '2018-11-12'
slug: introducing-vizscorer-a-bot-advisor-to-improve-your-ggplot-plots
draft: true
categories:
  - analytics
  - dataviz
tags:
  - R
  - algorithm
  - analytics
  - dataviz
---


<div id="TOC">
<ul>
<li><a href="#introducing-vizscorer-a-bot-advisor-to-improve-your-ggplot-plots">introducing vizscorer: a bot advisor to improve your ggplot plots</a><ul>
<li><a href="#how-to-measure-a-good-plot">How to measure a good plot?</a></li>
<li><a href="#how-to-train-machine-learning-to-recognize-a-good-plot">How to train Machine Learning to recognize a good plot?</a></li>
<li><a href="#can-machine-learning-talk-back-to-humans">Can Machine learning talk back to humans?</a></li>
<li><a href="#putting-all-together-vizscorer-and-the-scorer_bot">Putting all together: vizscorer and the scorer_bot</a></li>
<li><a href="#where-to-go-from-here-and-how-to-help">Where to go from here and how to help</a></li>
</ul></li>
</ul>
</div>

<div id="introducing-vizscorer-a-bot-advisor-to-improve-your-ggplot-plots" class="section level1">
<h1>introducing vizscorer: a bot advisor to improve your ggplot plots</h1>
<p>One of the most frustrating issues I face in my professional life is the plentitude of ineffective reports generated within my company. Wherever I look around me is plenty of junck charts, like barplot showing useless 3D effects or ambigous and crowded pie charts. I do understand the root causes of this desperate state of the art: people have always less time to dedicate to reports crafting, and even less to dedicate to their plot. In the crazy and speedy-going working life, my colleagues have no time and for learning data visualization principles. Even so, this remain quite a big problem since a lot of time and money-wasting consequences come from a poorly crafted report and plot:?</p>
<ul>
<li>wrong conclusions about underlying phenomenons and wrong decisions?</li>
<li>requests for more clarifications about unclearly showed data?</li>
<li>ground for organizational politic due to lack of adequate evidences able to limit it</li>
</ul>
<p>That is why once I realised this sad truth I have started wondering what could have I done about that. Two options came to my mind:?</p>
<ul>
<li>sit down and blame the fate?</li>
<li>face the problem and try to carve out some helpful solution?</li>
</ul>
<p>Since I am a passionate follower of <a href="http://www.andreacirillo.com/bookstack/seven_habits/">Steven Covey <em>7 habits</em></a>, I decided to discard the first option and devote myself to find and put in place an helpful solution to the problem.?</p>
<p>A the end of the journey I came out with the vizscorer package. This package contains a mix of machine learning and natural language generation. All of these tecniques are employed to quickly show the user how effective its plot is and how he can improve it.</p>
<p>Three are the main tasks performed by vizscorer:</p>
<ul>
<li>analysing ggplot plot internals (it can be applied only to ggplot plots)</li>
<li>scoring the plot based on its effectivenes</li>
<li>providing customised suggestion about how to improve it</li>
</ul>
<a href="/images/vizscorer_viz.001.png" >
<figure class="post_image">
<img src="/images/vizscorer_viz.001.png"  alt="infoviz" style="width: 400px;"/>
</figure>
<p></a></p>
<p>But let us follow the right order, showing you the route which led me to the package.</p>
<div id="how-to-measure-a-good-plot" class="section level2">
<h2>How to measure a good plot?</h2>
<p>The first topic I faced in my quest for a better dataviz world was the clear-cut definition of a good plot. As Kant used to say:</p>
<blockquote>
<p>the aestetich judgment is an individual judgment pretending to be universal.</p>
</blockquote>
<p>This means that everyone has its own tastes about beauty (Kant’s quote sounds fancier, doesn’t it?). Defining and measuring the beauty of a plot is thus a non trivial task. Even so, if we switch from the idea of measuring a nice-looking plot to the one of measuring an effective plot, theory of data visualization comes to our help. What theory I am talking about? When we talk about data viz two are the pillars you can not ignore:?</p>
<ul>
<li>The visual display of quantitative information by Edward R.Tufte?</li>
<li>Show me the numbers by Stephen Few?</li>
</ul>
<p>If you do not know them you can have a look at reasoned summary of Tufte’s theoretical framework I crafted within a <a href="http://www.andreacirillo.com/2018/02/10/summarising-tufte-theory-of-graphics-and-integrity-principles/">previous post</a>. Unfortunately I couldn’t find any effective summary of Few’s ideas.</p>
<p>Anyway, looking at these book you will find out that an effective plot should respects some common principles. This principles are for instance integrity, readability and maximization of data to ink ratio.?</p>
<p>This is all nice, at least for me, but how to measure the effectiveness of a plot given these principles?</p>
<p>The first step I moved toward this direction was taking an handful of less than 100 plots and score them as good or bad. I assigned the score based on my expert judgment about the level of compliance with mentioned principles (No suprise about my passion for compliance, <a href="https://www.linkedin.com/in/cirilloandrea">I am an auditor after all)</a>. You are thinking it is too rough, aren’t you? Well, I will give you two different answers:?</p>
<ol style="list-style-type: decimal">
<li>this is the first step, and we will add on it more robust statistical tools and reasoning later</li>
<li>this is not different from what Google do when dealing with <a href="https://ai.googleblog.com/2017/07/using-deep-learning-to-create.html">quality of photo and images</a>?</li>
</ol>
<p>Once this was done I need some way to associate the 0-1 flag with the attributes of each plot. That is why I wrote an R function able to look within ggplot object internals and get out from it precious info.</p>
<p>You can imagine it as a way to teach computers how to look at plots and describe them. A the beginning the function tests the plot to understand which type of plot it is. This is done looking for geometries and aestetichs. As a next steps the function performs studies data visualised from the ggplot object. This studies try to understand relationships among variables and the presence of outliers. Finally, some tests are performed to verify respect of data visualization principle. This is done leveraging information from mentioned analyses.</p>
<p>Fifteen attributes related to four areas of data visualization effectiveness are then saved in a data frame :</p>
<ul>
<li>readability of the plot, like the correct specification of the number of bins given the distribution of data</li>
<li>data density, like the presence of overplotting phenomenons</li>
<li>data to ink ratio, like the use of meaningless filled bars in bar plot</li>
<li>adequateness of labelling, like the presence of adequate labelling for axes</li>
</ul>
<p>Once having run this function on my training plots, I came out with a training database. This database showed for each plot the 0-1 flag I assigned and all data drawn from the function.</p>
<p>Wasn’t it a perfect occasion to apply some machine learning? I thought it was.</p>
</div>
<div id="how-to-train-machine-learning-to-recognize-a-good-plot" class="section level2">
<h2>How to train Machine Learning to recognize a good plot?</h2>
<p>What I was looking at that stage was a classification problem. The goal here was to predict if a given plot was good or bad based on a set of attributes related to the plot.?</p>
<p>I could have resorted to different algos and models able to perform this task. In the end I decided to apply a gradient boosting model. This model resulted able to provide the classification in the form of a probability.</p>
<p>This means that for each plot the algorithm is able to tell me how probable is for the plot to be a good one or a bad one.?</p>
<p>No point in getting here into details with the algo, we can just remember that:</p>
<ul>
<li>it works fitting various decision trees on your data and summing their predictions.</li>
<li>it is a boosting method. This means that after the first fitting round it takes the observed errors and fits another set of trees on these errors</li>
</ul>
<p>You can find a nice interactive explanation by Alex Rogozhnikov on <a href="http://arogozhnikov.github.io/2016/06/24/gradient_boosting_explained.html">its personal website</a>.</p>
</div>
<div id="can-machine-learning-talk-back-to-humans" class="section level2">
<h2>Can Machine learning talk back to humans?</h2>
<p>We have now a model able to score a plot given a set of attributes. It was quite exciting to come that far, but still this was not the end. I could indeed imagine my colleagues looking at the score given to one of their plot, then turning back to me and asking: and so what?</p>
<p>I was missing the last mile: teaching to the author of the plot how to improve it.</p>
<p>To do this I tried to develop a basic natural language generation engine. This engine performs three stuffs:</p>
<ul>
<li>taking the final score of the model from gradient boosting algo</li>
<li>analysing the internal data drawn for the plot deriving disregarded principles?</li>
<li>retrieving from a knowledge base information to describe the results and provide suggestions about how to improve the plot</li>
</ul>
<p>At the end of the process a nice deck of revealjs slide is produced to help the user navigate evaluations and suggestions back and forward.</p>
</div>
<div id="putting-all-together-vizscorer-and-the-scorer_bot" class="section level2">
<h2>Putting all together: vizscorer and the scorer_bot</h2>
<p>Once all of this was done, to make it available to my colleagues and the R users I developed the vizscorer package.</p>
<p>You can try the package for yourself installing it from Github with the following code:</p>
<pre class="r"><code>devtools::install_github(&quot;andreacirilloac/vizscorer&quot;)</code></pre>
<p>Let us see it in action:</p>
<a href="/images/vizscorer_demo.gif" >
<figure class="post_image">
<img src="/images/vizscorer_demo.gif"  alt="demo" style="width: 400px;"/>
</figure>
<p></a></p>
<p>As you see, there is no that much to do for the user. He just has to submit its ggplot plot to the scorer_bot function and an easy-going deck of slides pop up. The slides coming out are packed with customised suggestions about how to improve the plot.</p>
</div>
<div id="where-to-go-from-here-and-how-to-help" class="section level2">
<h2>Where to go from here and how to help</h2>
<p>The package is currently in a primordial phase. Even if it is able to perform the tasks described I can see several development directions:</p>
<ul>
<li>improving the number of plots employed for training the gradient boosting model</li>
<li>introducing a “console version” of the report, more usable and less annoying in the long run</li>
<li>increasing the level of cleaverness of the bot to make it able to analyse more complex plots and provide even more useful suggestions</li>
</ul>
<p>As I said, I started to develop the package looking for a way to help my company improve the quality and integrity of its data visualization.?</p>
<p>If you also think the quality and integrity of companies reports is a right reason to <em>code</em> for, you are more then wellcome on the official Github repository of vizscorer: <a href="https://github.com/AndreaCirilloAC/vizscorer">https://github.com/AndreaCirilloAC/vizscorer?</a></p>
<p>Both in case you will contribute to it or not, comments are welcome about how helpful it can be and how to improve it.</p>
</div>
</div>
